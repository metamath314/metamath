<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë©”íƒ€ìˆ˜í•™ 2026 ì •ì‹œ ë¶„ì„ ì‹œìŠ¤í…œ</title>
    <style>
        :root { --primary: #0984e3; --stable: #27ae60; --fit: #2980b9; --ambitious: #f39c12; --danger: #e74c3c; }
        body { font-family: 'Malgun Gothic', sans-serif; background: #f0f2f5; margin: 0; padding: 20px; }
        .container { max-width: 1200px; margin: auto; background: white; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); padding: 30px; }
        .header { text-align: center; margin-bottom: 20px; border-bottom: 3px solid var(--primary); padding-bottom: 15px; }
        .no-print { background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px; display: flex; flex-direction: column; align-items: center; gap: 15px; }
        .score-row { display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; }
        .input-group { display: flex; flex-direction: column; align-items: center; }
        input { width: 75px; padding: 8px; border: 1px solid #ccc; border-radius: 5px; text-align: center; font-weight: bold; }
        .btn { padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; color: white; margin: 5px; }
        .btn-blue { background: var(--primary); }
        .btn-green { background: var(--stable); }
        .tabs { display: flex; justify-content: center; margin-bottom: 20px; gap: 10px; }
        .tab { padding: 10px 40px; background: #ddd; cursor: pointer; border-radius: 8px 8px 0 0; font-weight: bold; transition: 0.3s; }
        .tab.active { background: var(--primary); color: white; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th { background: #eee; padding: 12px; border-bottom: 2px solid #333; font-size: 14px; }
        td { padding: 12px; border-bottom: 1px solid #ddd; text-align: center; }
        .badge { padding: 5px 12px; border-radius: 20px; color: white; font-weight: bold; font-size: 12px; }
        .bg-stable { background: var(--stable); } .bg-fit { background: var(--fit); }
        .bg-ambitious { background: var(--ambitious); } .bg-danger { background: var(--danger); }
        #authOverlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 9999; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        @media print { .no-print, .tabs { display: none !important; } }
    </style>
</head>
<body>

<div id="authOverlay">
    <h2 style="margin-bottom:20px;">ğŸ”’ ë©”íƒ€ìˆ˜í•™ ì¬ì›ìƒ ì „ìš© ì‹œìŠ¤í…œ</h2>
    <p>í•™ì›ì—ì„œ ì•ˆë‚´ë°›ì€ ì¸ì¦ ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
    <input type="password" id="pwInput" style="width: 200px; margin-bottom: 10px; padding: 10px;" onkeypress="if(event.keyCode==13) checkAuth()">
    <button class="btn btn-blue" onclick="checkAuth()">ì¸ì¦í•˜ê¸°</button>
</div>

<div class="container" id="mainContent" style="display:none;">
    <div class="header">
        <h1>ğŸ“ ë©”íƒ€ìˆ˜í•™ 2026 ì •ì‹œ ë¶„ì„ ì‹œìŠ¤í…œ</h1>
        <p>ì´íˆ¬ìŠ¤ ì •ë°€ ë°ì´í„° ê¸°ë°˜ ê°€ì¤‘ì¹˜ ë¶„ì„ ë²„ì „</p>
    </div>

    <div class="no-print">
        <div class="score-row">
            <div class="input-group"><label>êµ­ì–´</label><input type="number" id="kor" value="130"></div>
            <div class="input-group"><label>ìˆ˜í•™</label><input type="number" id="math" value="135"></div>
            <div class="input-group"><label>ì˜ì–´</label><input type="number" id="eng" value="1" min="1" max="9"></div>
            <div class="input-group"><label>íƒêµ¬1</label><input type="number" id="t1" value="65"></div>
            <div class="input-group"><label>íƒêµ¬2</label><input type="number" id="t2" value="60"></div>
        </div>
        <div>
            <input type="text" id="univSearch" placeholder="ëŒ€í•™ëª… ë˜ëŠ” í•™ê³¼ëª… ê²€ìƒ‰" style="width:250px; padding:10px;" onkeyup="runAnalysis()">
            <button class="btn btn-blue" onclick="runAnalysis()">ë¶„ì„ ê²°ê³¼ ì—…ë°ì´íŠ¸</button>
            <button class="btn btn-green" onclick="window.print()">ë¦¬í¬íŠ¸ ì¸ì‡„</button>
        </div>
    </div>

    <div class="tabs">
        <div id="tab-ê°€" class="tab active" onclick="changeTab('ê°€')">ê°€êµ°</div>
        <div id="tab-ë‚˜" class="tab" onclick="changeTab('ë‚˜')">ë‚˜êµ°</div>
        <div id="tab-ë‹¤" class="tab" onclick="changeTab('ë‹¤')">ë‹¤êµ°</div>
    </div>

    <div style="text-align: right; margin-bottom: 10px; font-weight: bold;">
        ë‹¨ìˆœ í•©ì‚° ì ìˆ˜(êµ­+ìˆ˜+íƒí‰ê· ): <span id="totalDisplay" style="color:red; font-size:22px;">0</span> ì 
    </div>

    <table>
        <thead>
            <tr>
                <th>ëŒ€í•™ëª…</th>
                <th>ëª¨ì§‘ë‹¨ìœ„</th>
                <th>ë°˜ì˜ë¹„ìœ¨(êµ­/ìˆ˜/ì˜/íƒ)</th>
                <th>ì´íˆ¬ìŠ¤ ì»·</th>
                <th>ë‚´ í™˜ì‚°ì ìˆ˜</th>
                <th>ì°¨ì´</th>
                <th>íŒì •</th>
            </tr>
        </thead>
        <tbody id="resultBody"></tbody>
    </table>
</div>

<script src="database.js"></script>

<script>
    const CORRECT_PW = "meta314";
    let currentGroup = 'ê°€';

    function checkAuth() {
        if (document.getElementById("pwInput").value === CORRECT_PW) {
            sessionStorage.setItem("meta_auth", "true");
            unlockContent();
        } else { alert("ì¸ì¦ ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤."); }
    }

    function unlockContent() {
        document.getElementById("authOverlay").style.display = "none";
        document.getElementById("mainContent").style.display = "block";
        runAnalysis();
    }

    function changeTab(group) {
        currentGroup = group;
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.getElementById('tab-' + group).classList.add('active');
        runAnalysis();
    }

    window.onload = function() {
        if (sessionStorage.getItem("meta_auth") === "true") unlockContent();
    }

    function runAnalysis() {
        if (typeof database === 'undefined') return;

        const kor = parseInt(document.getElementById('kor').value) || 0;
        const math = parseInt(document.getElementById('math').value) || 0;
        const eng = parseInt(document.getElementById('eng').value) || 1;
        const t1 = parseInt(document.getElementById('t1').value) || 0;
        const t2 = parseInt(document.getElementById('t2').value) || 0;
        const search = document.getElementById('univSearch').value.toLowerCase();

        const avgíƒêµ¬ = (t1 + t2) / 2;
        document.getElementById('totalDisplay').innerText = (kor + math + avgíƒêµ¬).toFixed(1);
        const body = document.getElementById('resultBody');
        
        let rows = "";
        database.forEach(item => {
            if (item.group !== currentGroup) return;
            if (search && !item.univ.toLowerCase().includes(search) && !item.dept.toLowerCase().includes(search)) return;

            // [ê°€ì¤‘ì¹˜ ë³´ì • ê³„ì‚° ë¡œì§]
            let myScore = 0;
            const totalW = (item.kr || 0) + (item.mr || 0) + (item.tr || 0);

            if (totalW > 0) {
                // ê°€ì¤‘ì¹˜ë¥¼ ì ìš©í•œ í•©ê³„ë¥¼ êµ¬í•˜ë˜, ë¶„ëª¨ë¥¼ ì¡°ì •í•˜ì—¬ ë‹¨ìˆœ í•©ê³„ ê·œëª¨(300~400ì ëŒ€)ë¡œ í™˜ì‚°
                // (êµ­*ë¹„ìœ¨ + ìˆ˜*ë¹„ìœ¨ + íƒ*ë¹„ìœ¨) / (ì „ì²´ë¹„ìœ¨/3)
                // ì´ë ‡ê²Œ í•˜ë©´ ê°€ì¤‘ì¹˜ íš¨ê³¼ëŠ” ì‚´ì•„ë‚˜ë©´ì„œ ê²°ê³¼ê°’ì€ ë‹¨ìˆœ í•©ì‚° ì ìˆ˜ì™€ ë¹„êµ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.
                myScore = ((kor * item.kr) + (math * item.mr) + (avgíƒêµ¬ * item.tr)) / (totalW / 3);
                
                // ì˜ì–´ ê°ì  (ë“±ê¸‰ë‹¹ 2ì  ì°¨ê°)
                myScore -= (eng - 1) * 2;
            } else {
                myScore = kor + math + avgíƒêµ¬;
            }

            const finalScore = parseFloat(myScore.toFixed(2));
            const diff = parseFloat((finalScore - item.cut).toFixed(2));
            
            let res = "ìœ„í—˜", cls = "bg-danger";
            if (diff >= 5) { res = "ì•ˆì •"; cls = "bg-stable"; }
            else if (diff >= -1) { res = "ì ì •"; cls = "bg-fit"; }
            else if (diff >= -7) { res = "ì†Œì‹ "; cls = "bg-ambitious"; }

            rows += `<tr>
                <td style="font-weight:bold;">${item.univ}</td>
                <td>${item.dept}</td>
                <td style="font-size:11px; color:#666;">${item.ratio}</td>
                <td style="background:#fff9f9;">${item.cut}</td>
                <td style="font-weight:bold; color:var(--primary); font-size:16px;">${finalScore}</td>
                <td style="font-weight:bold; color:${diff >= 0 ? 'blue' : 'red'}">${diff > 0 ? '+' + diff : diff}</td>
                <td><span class="badge ${cls}">${res}</span></td>
            </tr>`;
        });
        body.innerHTML = rows;
    }
</script>
</body>
</html>