<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë©”íƒ€ìˆ˜í•™ 2026 ì •ì‹œ ë¶„ì„ ì‹œìŠ¤í…œ</title>
    <style>
        :root { --primary: #0984e3; --stable: #27ae60; --fit: #2980b9; --ambitious: #f39c12; --danger: #e74c3c; }
        body { font-family: 'Malgun Gothic', sans-serif; background: #f0f2f5; margin: 0; padding: 20px; }
        .container { max-width: 1200px; margin: auto; background: white; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); padding: 30px; }
        .header { text-align: center; margin-bottom: 20px; border-bottom: 3px solid var(--primary); padding-bottom: 15px; }
        .no-print { background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px; display: flex; flex-direction: column; align-items: center; gap: 15px; }
        .score-row { display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; }
        .input-group { display: flex; flex-direction: column; align-items: center; }
        input { width: 70px; padding: 8px; border: 1px solid #ccc; border-radius: 5px; text-align: center; font-weight: bold; }
        .btn { padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; color: white; margin: 5px; }
        .btn-blue { background: var(--primary); }
        .btn-green { background: var(--stable); }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th { background: #eee; padding: 12px; border-bottom: 2px solid #333; }
        td { padding: 12px; border-bottom: 1px solid #ddd; text-align: center; }
        .badge { padding: 5px 12px; border-radius: 20px; color: white; font-weight: bold; font-size: 12px; }
        .bg-stable { background: var(--stable); } .bg-fit { background: var(--fit); }
        .bg-ambitious { background: var(--ambitious); } .bg-danger { background: var(--danger); }
        @media print { .no-print { display: none; } }
    </style>
</head>
<body>

<div class="container" id="mainContent" style="display:none;">
    <div class="header">
        <h1>ğŸ“ ë©”íƒ€ìˆ˜í•™ 2026 ì •ì‹œ ë¶„ì„ ì‹œìŠ¤í…œ</h1>
        <p>ì¬ì›ìƒ ì „ìš© í•©ê²© ì˜ˆì¸¡ ì†”ë£¨ì…˜</p>
    </div>

    <div class="no-print">
        <div class="score-row">
            <div class="input-group"><label>êµ­ì–´</label><input type="number" id="kor" value="130"></div>
            <div class="input-group"><label>ìˆ˜í•™</label><input type="number" id="math" value="135"></div>
            <div class="input-group"><label>ì˜ì–´(ë“±ê¸‰)</label><input type="number" id="eng" value="1" min="1" max="9"></div>
            <div class="input-group"><label>íƒêµ¬1</label><input type="number" id="t1" value="65"></div>
            <div class="input-group"><label>íƒêµ¬2</label><input type="number" id="t2" value="60"></div>
        </div>
        <div>
            <input type="text" id="univSearch" placeholder="ëŒ€í•™ëª… ë˜ëŠ” í•™ê³¼ëª… ê²€ìƒ‰" style="width:250px; padding:10px;" onkeyup="runAnalysis()">
            <button class="btn btn-blue" onclick="runAnalysis()">ì‹¤ì‹œê°„ ë¶„ì„</button>
            <button class="btn btn-green" onclick="window.print()">ë¦¬í¬íŠ¸ ì¸ì‡„</button>
        </div>
    </div>

    <div style="text-align: right; margin-bottom: 10px; font-weight: bold;">
        ë‹¨ìˆœ í•©ì‚° ì ìˆ˜: <span id="totalDisplay" style="color:red; font-size:22px;">0</span> ì 
    </div>

    <table>
        <thead>
            <tr>
                <th>ëŒ€í•™ëª…</th>
                <th>ëª¨ì§‘ë‹¨ìœ„</th>
                <th>ë°˜ì˜ë¹„ìœ¨(êµ­/ìˆ˜/ì˜/íƒ)</th>
                <th>ëŒ€í•™ë³„ ì»·</th>
                <th>ë‚´ í™˜ì‚°ì ìˆ˜</th>
                <th>ì°¨ì´</th>
                <th>íŒì •</th>
            </tr>
        </thead>
        <tbody id="resultBody"></tbody>
    </table>
</div>

<script src="database.js"></script>

<script>
    // [1] ë³´ì•ˆ ë¡œì§
    (function() {
        const PW = "meta314"; 
        if (sessionStorage.getItem("authorized") !== "true") {
            const input = prompt("ğŸ”’ ë©”íƒ€ìˆ˜í•™ ì¬ì›ìƒ ì „ìš©ì…ë‹ˆë‹¤.\nì¸ì¦ ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            if (input === PW) {
                sessionStorage.setItem("authorized", "true");
                document.getElementById("mainContent").style.display = "block";
            } else {
                alert("ì¸ì¦ ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.");
                window.location.reload();
            }
        } else {
            document.getElementById("mainContent").style.display = "block";
        }
    })();

    // [2] ë¶„ì„ ë¡œì§
    function runAnalysis() {
        if (typeof database === 'undefined') return;

        const kor = parseInt(document.getElementById('kor').value) || 0;
        const math = parseInt(document.getElementById('math').value) || 0;
        const eng = parseInt(document.getElementById('eng').value) || 1;
        const t1 = parseInt(document.getElementById('t1').value) || 0;
        const t2 = parseInt(document.getElementById('t2').value) || 0;
        const search = document.getElementById('univSearch').value.toLowerCase();

        document.getElementById('totalDisplay').innerText = kor + math + t1 + t2;
        const body = document.getElementById('resultBody');
        body.innerHTML = '';

        database.forEach(item => {
            if (search && !item.univ.toLowerCase().includes(search) && !item.dept.toLowerCase().includes(search)) return;

            // ëŒ€í•™ë³„ í™˜ì‚° ì ìˆ˜ ê³„ì‚° (êµ­/ìˆ˜/íƒ ë¹„ìœ¨ ë°˜ì˜)
            let myConverted = (kor + math + (t1 + t2) / 2); // ê¸°ë³¸ê°’
            
            if (item.ratio && item.ratio !== "ë¹„ìœ¨ì •ë³´ì—†ìŒ") {
                const totalW = item.kr + item.mr + item.tr;
                if (totalW > 0) {
                    myConverted = ((kor * item.kr) + (math * item.mr) + ((t1 + t2)/2 * item.tr)) / totalW;
                    // ì˜ì–´ ë“±ê¸‰ë‹¹ 2ì  ê°ì  ê°€ì‚° (ê°„ì´ ëª¨ë¸)
                    myConverted -= (eng - 1) * 2;
                }
            }

            const myScore = parseFloat(myConverted.toFixed(2));
            const diff = parseFloat((myScore - item.cut).toFixed(2));
            
            let res = "ìœ„í—˜", cls = "bg-danger";
            if (diff >= 3) { res = "ì•ˆì •"; cls = "bg-stable"; }
            else if (diff >= -0.5) { res = "ì ì •"; cls = "bg-fit"; }
            else if (diff >= -3) { res = "ì†Œì‹ "; cls = "bg-ambitious"; }

            body.innerHTML += `<tr>
                <td style="font-weight:bold;">${item.univ}</td>
                <td>${item.dept}</td>
                <td style="font-size:11px; color:#666;">${item.ratio}</td>
                <td>${item.cut}</td>
                <td style="font-weight:bold; color:var(--primary);">${myScore}</td>
                <td style="font-weight:bold; color:${diff >= 0 ? 'blue' : 'red'}">${diff > 0 ? '+' + diff : diff}</td>
                <td><span class="badge ${cls}">${res}</span></td>
            </tr>`;
        });
    }

    window.onload = function() { if(sessionStorage.getItem("authorized") === "true") runAnalysis(); }
</script>
</body>
</html>